{"id":"4add9632-b02b-4ef2-b20d-a630234e6ea5","revision":0,"last_node_id":87,"last_link_id":391,"nodes":[{"id":38,"type":"InpaintModelConditioning","pos":[1041.5126953125,82.9607162475586],"size":[302.3999938964844,138],"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":126},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":128},{"localized_name":"vae","name":"vae","type":"VAE","link":null},{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":368},{"localized_name":"mask","name":"mask","type":"MASK","link":371},{"localized_name":"noise_mask","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","slot_index":0,"links":[77]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","slot_index":1,"links":[78]},{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":2,"links":[88]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"InpaintModelConditioning","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[false]},{"id":8,"type":"VAEDecode","pos":[1729.164794921875,107.5765609741211],"size":[210,46],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[341,360]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"VAEDecode","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[]},{"id":59,"type":"VAELoader","pos":[11.626896858215332,224.64236450195312],"size":[270,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"VAELoader","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["ae.safetensors"]},{"id":58,"type":"NunchakuTextEncoderLoaderV2","pos":[-20.05972671508789,37.69057083129883],"size":[317.0367126464844,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model_type","name":"model_type","type":"COMBO","widget":{"name":"model_type"},"link":null},{"localized_name":"text_encoder1","name":"text_encoder1","type":"COMBO","widget":{"name":"text_encoder1"},"link":null},{"localized_name":"text_encoder2","name":"text_encoder2","type":"COMBO","widget":{"name":"text_encoder2"},"link":null},{"localized_name":"t5_min_length","name":"t5_min_length","type":"INT","widget":{"name":"t5_min_length"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[122,123]}],"properties":{"cnr_id":"ComfyUI-nunchaku","ver":"fe173a229180b566ef9ed73c7fbd6a4bd11d2736","Node name for S&R":"NunchakuTextEncoderLoaderV2","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["flux.1","clip_l.safetensors","awq-int4-flux.1-t5xxl.safetensors",512]},{"id":3,"type":"KSampler","pos":[1381.862060546875,-26.777359008789062],"size":[315,474],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":359},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":77},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":78},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":88},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"KSampler","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[317856333157384,"randomize",24,1,"euler","normal",1]},{"id":86,"type":"img8x","pos":[716.5283813476562,220.15927124023438],"size":[270,186],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":367},{"localized_name":"mask_opt","name":"mask_opt","shape":7,"type":"MASK","link":null},{"localized_name":"feather","name":"feather","type":"INT","widget":{"name":"feather"},"link":null},{"localized_name":"max_pixels","name":"max_pixels","type":"INT","widget":{"name":"max_pixels"},"link":null},{"localized_name":"multiple","name":"multiple","type":"INT","widget":{"name":"multiple"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[368,369,370]},{"localized_name":"outpaint_mask","name":"outpaint_mask","type":"MASK","links":[371,372]},{"localized_name":"processed_mask","name":"processed_mask","type":"MASK","links":null},{"localized_name":"x","name":"x","type":"INT","links":[373]},{"localized_name":"y","name":"y","type":"INT","links":[374]}],"title":"img8x 按照规则扩大边长","properties":{"Node name for S&R":"img8x","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"feather":true,"max_pixels":true,"multiple":true}}},"widgets_values":[1,1500000,64],"color":"#322","bgcolor":"#533"},{"id":85,"type":"PreviewImage","pos":[872.464111328125,506.7535400390625],"size":[317.4104309082031,495.5868225097656],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":360}],"outputs":[],"title":"kontext整个重绘后的图像","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PreviewImage","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[]},{"id":56,"type":"NunchakuFluxDiTLoader","pos":[417.4472961425781,-336.3815002441406],"size":[301.57464599609375,202],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"model_path","name":"model_path","type":"COMBO","widget":{"name":"model_path"},"link":null},{"localized_name":"cache_threshold","name":"cache_threshold","type":"FLOAT","widget":{"name":"cache_threshold"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"cpu_offload","name":"cpu_offload","type":"COMBO","widget":{"name":"cpu_offload"},"link":null},{"localized_name":"device_id","name":"device_id","type":"INT","widget":{"name":"device_id"},"link":null},{"localized_name":"data_type","name":"data_type","type":"COMBO","widget":{"name":"data_type"},"link":null},{"localized_name":"i2f_mode","name":"i2f_mode","shape":7,"type":"COMBO","widget":{"name":"i2f_mode"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[120]}],"properties":{"cnr_id":"ComfyUI-nunchaku","ver":"fe173a229180b566ef9ed73c7fbd6a4bd11d2736","Node name for S&R":"NunchakuFluxDiTLoader","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["717nuchaku\\svdq-fp4_r32-flux.1-fill-dev.safetensors",0,"nunchaku-fp16","auto",0,"bfloat16","enabled"]},{"id":39,"type":"DifferentialDiffusion","pos":[773.6304931640625,-124.59833526611328],"size":[277.20001220703125,26],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":120}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[358]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"DifferentialDiffusion","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[]},{"id":84,"type":"PathchSageAttentionKJ","pos":[1081.88134765625,-50.18110275268555],"size":[270,58],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":358},{"localized_name":"sage_attention","name":"sage_attention","type":"COMBO","widget":{"name":"sage_attention"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[359]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"PathchSageAttentionKJ","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"sage_attention":true}}},"widgets_values":["auto"]},{"id":76,"type":"ImageBatchLoader","pos":[-299.1338195800781,525.3206176757812],"size":[411.97332763671875,332.183349609375],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"directory","name":"directory","type":"STRING","widget":{"name":"directory"},"link":null},{"localized_name":"search_title","name":"search_title","type":"STRING","widget":{"name":"search_title"},"link":null},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"filename_option","name":"filename_option","type":"COMBO","widget":{"name":"filename_option"},"link":null},{"localized_name":"image_list","name":"image_list","type":"BOOLEAN","widget":{"name":"image_list"},"link":null},{"localized_name":"subfolder","name":"subfolder","type":"BOOLEAN","widget":{"name":"subfolder"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"filename","name":"filename","type":"STRING","links":null},{"localized_name":"image_count","name":"image_count","type":"STRING","links":null},{"localized_name":"image_list","name":"image_list","shape":6,"type":"IMAGE","links":null}],"title":"Image Batch Loader 用这个可以批处理图像","properties":{"Node name for S&R":"ImageBatchLoader","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["O:\\CMS\\ComfyUI\\input\\pasted","","","incremental_image",42,"increment","filename",false,false]},{"id":53,"type":"CLIPTextEncode","pos":[372.5704040527344,142.84886169433594],"size":[422.8500061035156,164.30999755859375],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":123},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[127]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"CLIPTextEncode","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[""]},{"id":80,"type":"Image Compare (🐺)","pos":[1645.700439453125,527.4273071289062],"size":[550.3820190429688,386.2000427246094],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image_a","name":"image_a","shape":7,"type":"IMAGE","link":370},{"localized_name":"image_b","name":"image_b","shape":7,"type":"IMAGE","link":334}],"outputs":[],"title":"Image Compare (🐺)  处理结果对比","properties":{"aux_id":"rakki194/ComfyUI-ImageCompare","ver":"472b4615cdb8b69605768b72f0db9ac08e5f213e","Node name for S&R":"Image Compare (🐺)","comparer_mode":"Slide","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[],"color":"#432","bgcolor":"#653"},{"id":17,"type":"LoadImage","pos":[183.73997497558594,470.2804870605469],"size":[315.2304992675781,522.600830078125],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[345,367]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[]}],"title":"Load Image原图像","properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"LoadImage","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["PixPin_2025-08-07_13-26-02.png","image"]},{"id":23,"type":"CLIPTextEncode","pos":[331.2880554199219,-88.1851577758789],"size":[422.8500061035156,164.30999755859375],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":122},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[125]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"CLIPTextEncode","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["Redraw the mask without changing the original image, and remove all watermarks and text"]},{"id":87,"type":"PreviewImage","pos":[1217.29052734375,506.08978271484375],"size":[342.84454345703125,495.66546630859375],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":391}],"outputs":[],"title":"将原图贴按位置贴到重绘图像后的图像","properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"PreviewImage"}},{"id":62,"type":"ConditioningZeroOut","pos":[788.1627197265625,106.30157470703125],"size":[197.712890625,26],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":127}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"ConditioningZeroOut","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[]},{"id":61,"type":"FluxGuidance","pos":[769.6926879882812,-27.186189651489258],"size":[270,58],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":125},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"FluxGuidance","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[2.5]},{"id":60,"type":"Anything Everywhere","pos":[41.26958465576172,348.4716796875],"size":[172.18905639648438,46],"flags":{},"order":9,"mode":0,"inputs":[{"color_on":"#FF6E6E","label":"VAE","localized_name":"anything","name":"anything","shape":7,"type":"VAE","link":124},{"label":"anything","name":"anything17","type":"*","link":null}],"outputs":[],"properties":{"cnr_id":"cg-use-everywhere","ver":"6.2.2","Node name for S&R":"Anything Everywhere","ue_properties":{"version":"7.0.1","group_restricted":0,"color_restricted":0,"widget_ue_connectable":{},"next_input_index":17}},"widgets_values":[]},{"id":79,"type":"PreviewImage","pos":[519.4838256835938,509.9991149902344],"size":[328.66668701171875,507.33331298828125],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":369}],"outputs":[],"title":"img8x节点预处理后图像，带有边缘。注意看分辨率","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"PreviewImage","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[]},{"id":68,"type":"ImageCompositeMasked","pos":[1721.8458251953125,224.82504272460938],"size":[270,146],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":341},{"localized_name":"source","name":"source","type":"IMAGE","link":345},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":372},{"localized_name":"x","name":"x","type":"INT","widget":{"name":"x"},"link":373},{"localized_name":"y","name":"y","type":"INT","widget":{"name":"y"},"link":374},{"localized_name":"resize_source","name":"resize_source","type":"BOOLEAN","widget":{"name":"resize_source"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[334,391]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"ImageCompositeMasked","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[0,0,false]},{"id":83,"type":"Note","pos":[2015.9608154296875,239.54461669921875],"size":[210,127.28252410888672],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["用来将原图按照坐标放入重绘边缘后的大图上面。\n\nsource是源图像。（这里输入的是源图像）\ndestination是底图。（这里输入的是kontext重绘后图像）"],"color":"#432","bgcolor":"#653"},{"id":81,"type":"Note","pos":[795.3741455078125,-261.2187805175781],"size":[210,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["differential diffusion是用来与mask配合的扩图用节点。作用是增加一些细节。sageattention可用可不用。"],"color":"#432","bgcolor":"#653"}],"links":[[7,3,0,8,0,"LATENT"],[77,38,0,3,1,"CONDITIONING"],[78,38,1,3,2,"CONDITIONING"],[88,38,2,3,3,"LATENT"],[120,56,0,39,0,"MODEL"],[122,58,0,23,0,"CLIP"],[123,58,0,53,0,"CLIP"],[124,59,0,60,0,"VAE"],[125,23,0,61,0,"CONDITIONING"],[126,61,0,38,0,"CONDITIONING"],[127,53,0,62,0,"CONDITIONING"],[128,62,0,38,1,"CONDITIONING"],[334,68,0,80,1,"IMAGE"],[341,8,0,68,0,"IMAGE"],[345,17,0,68,1,"IMAGE"],[358,39,0,84,0,"MODEL"],[359,84,0,3,0,"MODEL"],[360,8,0,85,0,"IMAGE"],[367,17,0,86,0,"IMAGE"],[368,86,0,38,3,"IMAGE"],[369,86,0,79,0,"IMAGE"],[370,86,0,80,0,"IMAGE"],[371,86,1,38,4,"MASK"],[372,86,1,68,2,"MASK"],[373,86,3,68,3,"INT"],[374,86,4,68,4,"INT"],[391,68,0,87,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.9090909090909091,"offset":[-135.88288159653712,396.33547334751]},"ue_links":[{"downstream":38,"downstream_slot":2,"upstream":"59","upstream_slot":0,"controller":60,"type":"VAE"},{"downstream":8,"downstream_slot":1,"upstream":"59","upstream_slot":0,"controller":60,"type":"VAE"}],"links_added_by_ue":[389,390]},"version":0.4}